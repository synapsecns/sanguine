{"solidity/RequestHarness.t.sol:RequestHarness":{"code":"0x608060405234801561001057600080fd5b506102af806100206000396000f3fe608060405234801561001057600080fd5b50600436106100675760003560e01c8063b057c8c111610050578063b057c8c114610102578063ce29602614610132578063d3cbde311461015e57600080fd5b8063138ac42f1461006c57806357c3882b146100ad575b600080fd5b61007f61007a3660046101ee565b610186565b60405177ffffffffffffffffffffffffffffffffffffffffffffffff90911681526020015b60405180910390f35b61007f6100bb366004610207565b60008063ffffffff8316602085901b6bffffffffffffffff0000000016606087901b77ffffffffffffffffffffffff00000000000000000000000016171795945050505050565b6101156101103660046101ee565b610190565b6040516bffffffffffffffffffffffff90911681526020016100a4565b6101456101403660046101ee565b6101aa565b60405167ffffffffffffffff90911681526020016100a4565b61017161016c3660046101ee565b6101cc565b60405163ffffffff90911681526020016100a4565b6000815b92915050565b600061018a8260601c6bffffffffffffffffffffffff1690565b600061018a8260201c73ffffffffffffffffffffffffffffffffffffffff1690565b600077ffffffffffffffffffffffffffffffffffffffffffffffff821661018a565b60006020828403121561020057600080fd5b5035919050565b60008060006060848603121561021c57600080fd5b83356bffffffffffffffffffffffff8116811461023857600080fd5b9250602084013567ffffffffffffffff8116811461025557600080fd5b9150604084013563ffffffff8116811461026e57600080fd5b80915050925092509256fea26469706673582212205099a2e13c9386768b85eeb91ff8d1340e418fc08206564efa7cfd8d0e71374064736f6c63430008110033","runtime-code":"0x608060405234801561001057600080fd5b50600436106100675760003560e01c8063b057c8c111610050578063b057c8c114610102578063ce29602614610132578063d3cbde311461015e57600080fd5b8063138ac42f1461006c57806357c3882b146100ad575b600080fd5b61007f61007a3660046101ee565b610186565b60405177ffffffffffffffffffffffffffffffffffffffffffffffff90911681526020015b60405180910390f35b61007f6100bb366004610207565b60008063ffffffff8316602085901b6bffffffffffffffff0000000016606087901b77ffffffffffffffffffffffff00000000000000000000000016171795945050505050565b6101156101103660046101ee565b610190565b6040516bffffffffffffffffffffffff90911681526020016100a4565b6101456101403660046101ee565b6101aa565b60405167ffffffffffffffff90911681526020016100a4565b61017161016c3660046101ee565b6101cc565b60405163ffffffff90911681526020016100a4565b6000815b92915050565b600061018a8260601c6bffffffffffffffffffffffff1690565b600061018a8260201c73ffffffffffffffffffffffffffffffffffffffff1690565b600077ffffffffffffffffffffffffffffffffffffffffffffffff821661018a565b60006020828403121561020057600080fd5b5035919050565b60008060006060848603121561021c57600080fd5b83356bffffffffffffffffffffffff8116811461023857600080fd5b9250602084013567ffffffffffffffff8116811461025557600080fd5b9150604084013563ffffffff8116811461026e57600080fd5b80915050925092509256fea26469706673582212205099a2e13c9386768b85eeb91ff8d1340e418fc08206564efa7cfd8d0e71374064736f6c63430008110033","info":{"source":"// SPDX-License-Identifier: MIT\npragma solidity 0.8.17;\n\n/// Request is encoded data with \"message execution request\".\ntype Request is uint192;\n\nusing RequestLib for Request global;\n\n/// Library for formatting _the request part_ of _the base messages_.\n/// - Request represents a message sender requirements for the message execution on the destination chain.\n/// - Request occupies a single storage word, and thus is stored on stack instead of being stored in memory.\n/// \u003e gasDrop field is included for future compatibility and is ignored at the moment.\n///\n/// # Request stack layout (from highest bits to lowest)\n///\n/// | Position   | Field    | Type   | Bytes | Description                                          |\n/// | ---------- | -------- | ------ | ----- | ---------------------------------------------------- |\n/// | (024..012] | gasDrop  | uint96 | 12    | Minimum amount of gas token to drop to the recipient |\n/// | (012..004] | gasLimit | uint64 | 8     | Minimum amount of gas units to supply for execution  |\n/// | (004..000] | version  | uint32 | 4     | Base message version to pass to the recipient        |\n\nlibrary RequestLib {\n    /// @dev Amount of bits to shift to gasDrop field\n    uint192 private constant SHIFT_GAS_DROP = 12 * 8;\n    /// @dev Amount of bits to shift to gasLimit field\n    uint192 private constant SHIFT_GAS_LIMIT = 4 * 8;\n\n    /// @notice Returns an encoded request with the given fields\n    /// @param gasDrop_     Minimum amount of gas token to drop to the recipient (ignored at the moment)\n    /// @param gasLimit_    Minimum amount of gas units to supply for execution\n    /// @param version_     Base message version to pass to the recipient\n    function encodeRequest(uint96 gasDrop_, uint64 gasLimit_, uint32 version_) internal pure returns (Request) {\n        return Request.wrap(uint192(gasDrop_) \u003c\u003c SHIFT_GAS_DROP | uint192(gasLimit_) \u003c\u003c SHIFT_GAS_LIMIT | version_);\n    }\n\n    /// @notice Wraps the padded encoded request into a Request-typed value.\n    /// @dev The \"padded\" request is simply an encoded request casted to uint256 (highest bits are set to zero).\n    /// Casting to uint256 is done automatically in Solidity, so no extra actions from consumers are needed.\n    /// The highest bits are discarded, so that the contracts dealing with encoded requests\n    /// don't need to be updated, if a new field is added.\n    function wrapPadded(uint256 paddedRequest) internal pure returns (Request) {\n        return Request.wrap(uint192(paddedRequest));\n    }\n\n    /// @notice Returns the requested of gas token to drop to the recipient.\n    function gasDrop(Request request) internal pure returns (uint96) {\n        // Casting to uint96 will truncate the highest bits, which is the behavior we want\n        return uint96(Request.unwrap(request) \u003e\u003e SHIFT_GAS_DROP);\n    }\n\n    /// @notice Returns the requested minimum amount of gas units to supply for execution.\n    function gasLimit(Request request) internal pure returns (uint64) {\n        // Casting to uint64 will truncate the highest bits, which is the behavior we want\n        return uint64(Request.unwrap(request) \u003e\u003e SHIFT_GAS_LIMIT);\n    }\n\n    /// @notice Returns the requested base message version to pass to the recipient.\n    function version(Request request) internal pure returns (uint32) {\n        // Casting to uint32 will truncate the highest bits, which is the behavior we want\n        return uint32(Request.unwrap(request));\n    }\n}\n\n// solhint-disable ordering\ncontract RequestHarness {\n    // Note: we don't add an empty test() function here, as it currently leads\n    // to zero coverage on the corresponding library.\n\n    function encodeRequest(uint96 gasDrop_, uint64 gasLimit_, uint32 version_) public pure returns (uint192) {\n        // Walkaround to get the forge coverage working on libraries, see\n        // https://github.com/foundry-rs/foundry/pull/3128#issuecomment-1241245086\n        Request request = RequestLib.encodeRequest(gasDrop_, gasLimit_, version_);\n        return Request.unwrap(request);\n    }\n\n    function wrapPadded(uint256 paddedRequest) public pure returns (uint192) {\n        return Request.unwrap(RequestLib.wrapPadded(paddedRequest));\n    }\n\n    function gasLimit(uint256 paddedRequest) public pure returns (uint64) {\n        return RequestLib.wrapPadded(paddedRequest).gasLimit();\n    }\n\n    function gasDrop(uint256 paddedRequest) public pure returns (uint96) {\n        return RequestLib.wrapPadded(paddedRequest).gasDrop();\n    }\n\n    function version(uint256 paddedRequest) public pure returns (uint32) {\n        return RequestLib.wrapPadded(paddedRequest).version();\n    }\n}\n","language":"Solidity","languageVersion":"0.8.17","compilerVersion":"0.8.17","compilerOptions":"--combined-json bin,bin-runtime,srcmap,srcmap-runtime,abi,userdoc,devdoc,metadata,hashes --optimize --optimize-runs 10000 --allow-paths ., ./, ../","srcMap":"3495:1150:0:-:0;;;;;;;;;;;;;;;;;;;","srcMapRuntime":"3495:1150:0:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4057:149;;;;;;:::i;:::-;;:::i;:::-;;;375:50:1;363:63;;;345:82;;333:2;318:18;4057:149:0;;;;;;;;3659:392;;;;;;:::i;:::-;3755:7;;1836:86;;;1363:5;1874:37;;;;;1253:6;1836:35;;;;;:75;:86;3931:73;3659:392;-1:-1:-1;;;;;3659:392:0;4359:139;;;;;;:::i;:::-;;:::i;:::-;;;1261:26:1;1249:39;;;1231:58;;1219:2;1204:18;4359:139:0;1087:208:1;4212:141:0;;;;;;:::i;:::-;;:::i;:::-;;;1474:18:1;1462:31;;;1444:50;;1432:2;1417:18;4212:141:0;1300:200:1;4504:139:0;;;;;;:::i;:::-;;:::i;:::-;;;1679:10:1;1667:23;;;1649:42;;1637:2;1622:18;4504:139:0;1505:192:1;4057:149:0;4121:7;4184:13;4162:36;4140:59;4057:149;-1:-1:-1;;4057:149:0:o;4359:139::-;4420:6;4445:46;4467:13;1253:6;2784:41;;;;2604:229;4212:141;4274:6;4299:47;4321:13;1363:5;3111:42;;;;2930:231;4504:139;4565:6;4590:44;;;:46;2386:135;14:180:1;73:6;126:2;114:9;105:7;101:23;97:32;94:52;;;142:1;139;132:12;94:52;-1:-1:-1;165:23:1;;14:180;-1:-1:-1;14:180:1:o;438:644::-;512:6;520;528;581:2;569:9;560:7;556:23;552:32;549:52;;;597:1;594;587:12;549:52;636:9;623:23;686:26;679:5;675:38;668:5;665:49;655:77;;728:1;725;718:12;655:77;751:5;-1:-1:-1;808:2:1;793:18;;780:32;856:18;843:32;;831:45;;821:73;;890:1;887;880:12;821:73;913:7;-1:-1:-1;972:2:1;957:18;;944:32;1020:10;1007:24;;995:37;;985:65;;1046:1;1043;1036:12;985:65;1069:7;1059:17;;;438:644;;;;;:::o","abiDefinition":[{"inputs":[{"internalType":"uint96","name":"gasDrop_","type":"uint96"},{"internalType":"uint64","name":"gasLimit_","type":"uint64"},{"internalType":"uint32","name":"version_","type":"uint32"}],"name":"encodeRequest","outputs":[{"internalType":"uint192","name":"","type":"uint192"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"uint256","name":"paddedRequest","type":"uint256"}],"name":"gasDrop","outputs":[{"internalType":"uint96","name":"","type":"uint96"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"uint256","name":"paddedRequest","type":"uint256"}],"name":"gasLimit","outputs":[{"internalType":"uint64","name":"","type":"uint64"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"uint256","name":"paddedRequest","type":"uint256"}],"name":"version","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"uint256","name":"paddedRequest","type":"uint256"}],"name":"wrapPadded","outputs":[{"internalType":"uint192","name":"","type":"uint192"}],"stateMutability":"pure","type":"function"}],"userDoc":{"kind":"user","methods":{},"version":1},"developerDoc":{"kind":"dev","methods":{},"version":1},"metadata":"{\"compiler\":{\"version\":\"0.8.17+commit.8df45f5f\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"uint96\",\"name\":\"gasDrop_\",\"type\":\"uint96\"},{\"internalType\":\"uint64\",\"name\":\"gasLimit_\",\"type\":\"uint64\"},{\"internalType\":\"uint32\",\"name\":\"version_\",\"type\":\"uint32\"}],\"name\":\"encodeRequest\",\"outputs\":[{\"internalType\":\"uint192\",\"name\":\"\",\"type\":\"uint192\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"paddedRequest\",\"type\":\"uint256\"}],\"name\":\"gasDrop\",\"outputs\":[{\"internalType\":\"uint96\",\"name\":\"\",\"type\":\"uint96\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"paddedRequest\",\"type\":\"uint256\"}],\"name\":\"gasLimit\",\"outputs\":[{\"internalType\":\"uint64\",\"name\":\"\",\"type\":\"uint64\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"paddedRequest\",\"type\":\"uint256\"}],\"name\":\"version\",\"outputs\":[{\"internalType\":\"uint32\",\"name\":\"\",\"type\":\"uint32\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"paddedRequest\",\"type\":\"uint256\"}],\"name\":\"wrapPadded\",\"outputs\":[{\"internalType\":\"uint192\",\"name\":\"\",\"type\":\"uint192\"}],\"stateMutability\":\"pure\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"solidity/RequestHarness.t.sol\":\"RequestHarness\"},\"evmVersion\":\"london\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":10000},\"remappings\":[]},\"sources\":{\"solidity/RequestHarness.t.sol\":{\"keccak256\":\"0x6b49a6e288c523aed9e304e27de4e4c70fd9179cbec0862889a978d53dc40ceb\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://a17a2be45d39def05dd717da243e4ad048e8b316d640cbc9856dbf9fa14ef841\",\"dweb:/ipfs/QmU12oWnJZwra1PyJVYr46NNK2hXkEZcf4oR9rN2sGeKQu\"]}},\"version\":1}"},"hashes":{"encodeRequest(uint96,uint64,uint32)":"57c3882b","gasDrop(uint256)":"b057c8c1","gasLimit(uint256)":"ce296026","version(uint256)":"d3cbde31","wrapPadded(uint256)":"138ac42f"}},"solidity/RequestHarness.t.sol:RequestLib":{"code":"0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220c92a451cde00fb6c424e2c57049f64e2f89b61e296dbef192e6f5273afd93aac64736f6c63430008110033","runtime-code":"0x73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220c92a451cde00fb6c424e2c57049f64e2f89b61e296dbef192e6f5273afd93aac64736f6c63430008110033","info":{"source":"// SPDX-License-Identifier: MIT\npragma solidity 0.8.17;\n\n/// Request is encoded data with \"message execution request\".\ntype Request is uint192;\n\nusing RequestLib for Request global;\n\n/// Library for formatting _the request part_ of _the base messages_.\n/// - Request represents a message sender requirements for the message execution on the destination chain.\n/// - Request occupies a single storage word, and thus is stored on stack instead of being stored in memory.\n/// \u003e gasDrop field is included for future compatibility and is ignored at the moment.\n///\n/// # Request stack layout (from highest bits to lowest)\n///\n/// | Position   | Field    | Type   | Bytes | Description                                          |\n/// | ---------- | -------- | ------ | ----- | ---------------------------------------------------- |\n/// | (024..012] | gasDrop  | uint96 | 12    | Minimum amount of gas token to drop to the recipient |\n/// | (012..004] | gasLimit | uint64 | 8     | Minimum amount of gas units to supply for execution  |\n/// | (004..000] | version  | uint32 | 4     | Base message version to pass to the recipient        |\n\nlibrary RequestLib {\n    /// @dev Amount of bits to shift to gasDrop field\n    uint192 private constant SHIFT_GAS_DROP = 12 * 8;\n    /// @dev Amount of bits to shift to gasLimit field\n    uint192 private constant SHIFT_GAS_LIMIT = 4 * 8;\n\n    /// @notice Returns an encoded request with the given fields\n    /// @param gasDrop_     Minimum amount of gas token to drop to the recipient (ignored at the moment)\n    /// @param gasLimit_    Minimum amount of gas units to supply for execution\n    /// @param version_     Base message version to pass to the recipient\n    function encodeRequest(uint96 gasDrop_, uint64 gasLimit_, uint32 version_) internal pure returns (Request) {\n        return Request.wrap(uint192(gasDrop_) \u003c\u003c SHIFT_GAS_DROP | uint192(gasLimit_) \u003c\u003c SHIFT_GAS_LIMIT | version_);\n    }\n\n    /// @notice Wraps the padded encoded request into a Request-typed value.\n    /// @dev The \"padded\" request is simply an encoded request casted to uint256 (highest bits are set to zero).\n    /// Casting to uint256 is done automatically in Solidity, so no extra actions from consumers are needed.\n    /// The highest bits are discarded, so that the contracts dealing with encoded requests\n    /// don't need to be updated, if a new field is added.\n    function wrapPadded(uint256 paddedRequest) internal pure returns (Request) {\n        return Request.wrap(uint192(paddedRequest));\n    }\n\n    /// @notice Returns the requested of gas token to drop to the recipient.\n    function gasDrop(Request request) internal pure returns (uint96) {\n        // Casting to uint96 will truncate the highest bits, which is the behavior we want\n        return uint96(Request.unwrap(request) \u003e\u003e SHIFT_GAS_DROP);\n    }\n\n    /// @notice Returns the requested minimum amount of gas units to supply for execution.\n    function gasLimit(Request request) internal pure returns (uint64) {\n        // Casting to uint64 will truncate the highest bits, which is the behavior we want\n        return uint64(Request.unwrap(request) \u003e\u003e SHIFT_GAS_LIMIT);\n    }\n\n    /// @notice Returns the requested base message version to pass to the recipient.\n    function version(Request request) internal pure returns (uint32) {\n        // Casting to uint32 will truncate the highest bits, which is the behavior we want\n        return uint32(Request.unwrap(request));\n    }\n}\n\n// solhint-disable ordering\ncontract RequestHarness {\n    // Note: we don't add an empty test() function here, as it currently leads\n    // to zero coverage on the corresponding library.\n\n    function encodeRequest(uint96 gasDrop_, uint64 gasLimit_, uint32 version_) public pure returns (uint192) {\n        // Walkaround to get the forge coverage working on libraries, see\n        // https://github.com/foundry-rs/foundry/pull/3128#issuecomment-1241245086\n        Request request = RequestLib.encodeRequest(gasDrop_, gasLimit_, version_);\n        return Request.unwrap(request);\n    }\n\n    function wrapPadded(uint256 paddedRequest) public pure returns (uint192) {\n        return Request.unwrap(RequestLib.wrapPadded(paddedRequest));\n    }\n\n    function gasLimit(uint256 paddedRequest) public pure returns (uint64) {\n        return RequestLib.wrapPadded(paddedRequest).gasLimit();\n    }\n\n    function gasDrop(uint256 paddedRequest) public pure returns (uint96) {\n        return RequestLib.wrapPadded(paddedRequest).gasDrop();\n    }\n\n    function version(uint256 paddedRequest) public pure returns (uint32) {\n        return RequestLib.wrapPadded(paddedRequest).version();\n    }\n}\n","language":"Solidity","languageVersion":"0.8.17","compilerVersion":"0.8.17","compilerOptions":"--combined-json bin,bin-runtime,srcmap,srcmap-runtime,abi,userdoc,devdoc,metadata,hashes --optimize --optimize-runs 10000 --allow-paths ., ./, ../","srcMap":"1132:2333:0:-:0;;;;;;;;;;;;;;;-1:-1:-1;;;1132:2333:0;;;;;;;;;;;;;;;;;","srcMapRuntime":"1132:2333:0:-:0;;;;;;;;","abiDefinition":[],"userDoc":{"kind":"user","methods":{},"notice":"Library for formatting _the request part_ of _the base messages_. - Request represents a message sender requirements for the message execution on the destination chain. - Request occupies a single storage word, and thus is stored on stack instead of being stored in memory. \u003e gasDrop field is included for future compatibility and is ignored at the moment. # Request stack layout (from highest bits to lowest) | Position   | Field    | Type   | Bytes | Description                                          | | ---------- | -------- | ------ | ----- | ---------------------------------------------------- | | (024..012] | gasDrop  | uint96 | 12    | Minimum amount of gas token to drop to the recipient | | (012..004] | gasLimit | uint64 | 8     | Minimum amount of gas units to supply for execution  | | (004..000] | version  | uint32 | 4     | Base message version to pass to the recipient        |","version":1},"developerDoc":{"kind":"dev","methods":{},"stateVariables":{"SHIFT_GAS_DROP":{"details":"Amount of bits to shift to gasDrop field"},"SHIFT_GAS_LIMIT":{"details":"Amount of bits to shift to gasLimit field"}},"version":1},"metadata":"{\"compiler\":{\"version\":\"0.8.17+commit.8df45f5f\"},\"language\":\"Solidity\",\"output\":{\"abi\":[],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"stateVariables\":{\"SHIFT_GAS_DROP\":{\"details\":\"Amount of bits to shift to gasDrop field\"},\"SHIFT_GAS_LIMIT\":{\"details\":\"Amount of bits to shift to gasLimit field\"}},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"notice\":\"Library for formatting _the request part_ of _the base messages_. - Request represents a message sender requirements for the message execution on the destination chain. - Request occupies a single storage word, and thus is stored on stack instead of being stored in memory. \u003e gasDrop field is included for future compatibility and is ignored at the moment. # Request stack layout (from highest bits to lowest) | Position   | Field    | Type   | Bytes | Description                                          | | ---------- | -------- | ------ | ----- | ---------------------------------------------------- | | (024..012] | gasDrop  | uint96 | 12    | Minimum amount of gas token to drop to the recipient | | (012..004] | gasLimit | uint64 | 8     | Minimum amount of gas units to supply for execution  | | (004..000] | version  | uint32 | 4     | Base message version to pass to the recipient        |\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"solidity/RequestHarness.t.sol\":\"RequestLib\"},\"evmVersion\":\"london\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":10000},\"remappings\":[]},\"sources\":{\"solidity/RequestHarness.t.sol\":{\"keccak256\":\"0x6b49a6e288c523aed9e304e27de4e4c70fd9179cbec0862889a978d53dc40ceb\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://a17a2be45d39def05dd717da243e4ad048e8b316d640cbc9856dbf9fa14ef841\",\"dweb:/ipfs/QmU12oWnJZwra1PyJVYr46NNK2hXkEZcf4oR9rN2sGeKQu\"]}},\"version\":1}"},"hashes":{}}}